# ğŸ”„ æ··åˆæ¶æ§‹è¨­è¨ˆ - æœ¬åœ° + é›²ç«¯é›™è»Œé‹ä½œ

## ğŸ¯ æ¶æ§‹æ¦‚è¦½

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    AI Agent Team æ··åˆæ¶æ§‹                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

æœ¬åœ°ç’°å¢ƒ (é›¢ç·šå„ªå…ˆ)                     é›²ç«¯ç’°å¢ƒ (å”ä½œåŒæ­¥)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   æœ¬åœ° Docker      â”‚   â‡„ é›™å‘åŒæ­¥ â‡„   â”‚  Cloudflare Workersâ”‚
â”‚                    â”‚                  â”‚                    â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚                  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚ FastAPI      â”‚   â”‚                  â”‚ â”‚ Hono API     â”‚   â”‚
â”‚ â”‚ (Python)     â”‚   â”‚                  â”‚ â”‚ (TypeScript) â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚                  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                    â”‚                  â”‚                    â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚                  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚ SQLite       â”‚â—„â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â–ºâ”‚ D1 Database  â”‚   â”‚
â”‚ â”‚ (æœ¬åœ°æª”æ¡ˆ)   â”‚   â”‚    å®šæœŸåŒæ­¥        â”‚ â”‚ (é›²ç«¯)       â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚                  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                    â”‚                  â”‚                    â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚                  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚ ChromaDB     â”‚â—„â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â–ºâ”‚ Vectorize    â”‚   â”‚
â”‚ â”‚ (å‘é‡è³‡æ–™åº«) â”‚   â”‚    å‘é‡åŒæ­¥        â”‚ â”‚ (å‘é‡è³‡æ–™åº«) â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚                  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                    â”‚                  â”‚                    â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚                  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚ Local Files  â”‚â—„â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â–ºâ”‚ R2 Storage   â”‚   â”‚
â”‚ â”‚ (æ–‡æª”å„²å­˜)   â”‚   â”‚    æª”æ¡ˆåŒæ­¥        â”‚ â”‚ (ç‰©ä»¶å„²å­˜)   â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚                  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                    â”‚                  â”‚                    â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚                  â”‚                    â”‚
â”‚ â”‚ Web UI       â”‚   â”‚                  â”‚                    â”‚
â”‚ â”‚ (Svelte/React)â”‚  â”‚                  â”‚                    â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚                  â”‚                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     localhost:8000                      api.shyangtsuen.xyz

     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     â”‚   CLI Tool   â”‚
     â”‚ (æ··åˆæ§åˆ¶)    â”‚
     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       - æœ¬åœ°å„ªå…ˆ
       - é›²ç«¯å‚™ä»½
       - æ‰‹å‹•/è‡ªå‹•åŒæ­¥
```

## ğŸ¯ è¨­è¨ˆåŸå‰‡

### 1. **æœ¬åœ°å„ªå…ˆ (Local-First)**
- æ‰€æœ‰æ“ä½œé è¨­åœ¨æœ¬åœ°åŸ·è¡Œ
- ç„¡ç¶²è·¯æ™‚å®Œå…¨å¯ç”¨
- å¿«é€ŸéŸ¿æ‡‰ï¼Œç„¡å»¶é²

### 2. **é›²ç«¯å¢å¼· (Cloud-Enhanced)**
- åœ˜éšŠå”ä½œé€éé›²ç«¯
- è‡ªå‹•å‚™ä»½åˆ°é›²ç«¯
- å¤šè£ç½®åŒæ­¥

### 3. **æ™ºèƒ½åŒæ­¥ (Smart Sync)**
- è¡çªåµæ¸¬å’Œè§£æ±º
- å¢é‡åŒæ­¥ï¼ˆåƒ…åŒæ­¥è®Šæ›´ï¼‰
- å¯é…ç½®åŒæ­¥ç­–ç•¥

## ğŸ“Š æŠ€è¡“æ£§å°æ¯”

| åŠŸèƒ½ | æœ¬åœ°ç’°å¢ƒ | é›²ç«¯ç’°å¢ƒ |
|------|---------|---------|
| **API æ¡†æ¶** | FastAPI (Python) | Hono (TypeScript) |
| **è³‡æ–™åº«** | SQLite | Cloudflare D1 |
| **å‘é‡è³‡æ–™åº«** | ChromaDB | Cloudflare Vectorize |
| **æª”æ¡ˆå„²å­˜** | Local FileSystem | R2 Storage |
| **å¿«å–** | Redis (optional) | KV Namespace |
| **ä½‡åˆ—** | Celery (optional) | Cloudflare Queues |
| **Web UI** | Svelte/React (local) | Cloudflare Pages |

## ğŸ”„ åŒæ­¥æ©Ÿåˆ¶

### åŒæ­¥ç­–ç•¥

#### **ç­–ç•¥ 1: æ‰‹å‹•åŒæ­¥ï¼ˆå®Œå…¨æ§åˆ¶ï¼‰**
```bash
# æ¨é€æœ¬åœ°è®Šæ›´åˆ°é›²ç«¯
ai-team sync push

# å¾é›²ç«¯æ‹‰å–è®Šæ›´
ai-team sync pull

# é›™å‘åŒæ­¥
ai-team sync both
```

#### **ç­–ç•¥ 2: è‡ªå‹•åŒæ­¥ï¼ˆä¾¿åˆ©ï¼‰**
```bash
# å•Ÿå‹•è‡ªå‹•åŒæ­¥ï¼ˆæ¯ 5 åˆ†é˜ï¼‰
ai-team sync auto --interval 5m

# å³æ™‚åŒæ­¥ï¼ˆæœ‰è®Šæ›´ç«‹å³åŒæ­¥ï¼‰
ai-team sync realtime
```

#### **ç­–ç•¥ 3: æ’ç¨‹åŒæ­¥ï¼ˆå¹³è¡¡ï¼‰**
```bash
# æ¯å°æ™‚åŒæ­¥ä¸€æ¬¡
ai-team sync schedule --cron "0 * * * *"

# æ¯å¤©ä¸‹ç­å‰åŒæ­¥
ai-team sync schedule --cron "0 18 * * *"
```

### åŒæ­¥å…§å®¹

```yaml
sync_config:
  # ä»»å‹™è³‡æ–™
  tasks:
    direction: bidirectional  # é›™å‘
    conflict_resolution: newest_wins

  # çŸ¥è­˜åº«
  knowledge_base:
    direction: bidirectional
    conflict_resolution: manual  # æ‰‹å‹•è§£æ±ºè¡çª

  # æ–‡æª”
  documents:
    direction: push_to_cloud  # å–®å‘åˆ°é›²ç«¯ï¼ˆå‚™ä»½ï¼‰

  # ç³»çµ±æ—¥èªŒ
  logs:
    direction: push_to_cloud
    retention_local: 7_days
    retention_cloud: 90_days
```

### è¡çªè§£æ±ºç­–ç•¥

```python
# 1. æœ€æ–°å„ªå…ˆ (Newest Wins)
if local.updated_at > cloud.updated_at:
    winner = local
else:
    winner = cloud

# 2. æ‰‹å‹•è§£æ±º (Manual Resolution)
show_diff(local, cloud)
winner = user_choose()

# 3. åˆä½µç­–ç•¥ (Merge)
merged = merge(local, cloud)
```

## ğŸš€ ä½¿ç”¨æƒ…å¢ƒ

### æƒ…å¢ƒ 1: é›¢ç·šç”¢å“é–‹ç™¼

```bash
# æ—©ä¸Šå•Ÿå‹•æœ¬åœ°ç’°å¢ƒ
docker-compose up -d

# å‰µå»ºæ–°å°ˆæ¡ˆï¼ˆå®Œå…¨é›¢ç·šï¼‰
ai-team create-project "é›»å•†å¹³å°é–‹ç™¼" --local

# Coordinator åˆ†é…ä»»å‹™
ai-team coordinator process "å¯¦ç¾ç”¨æˆ¶èªè­‰ç³»çµ±"

# æŸ¥çœ‹ä»»å‹™
ai-team tasks list --status pending

# é–‹ç™¼ä¸€æ•´å¤©...

# ä¸‹ç­å‰åŒæ­¥åˆ°é›²ç«¯ï¼ˆå‚™ä»½ï¼‰
ai-team sync push

# é—œé–‰æœ¬åœ°ç’°å¢ƒ
docker-compose down
```

### æƒ…å¢ƒ 2: åœ˜éšŠå”ä½œ

```bash
# æˆå“¡ Aï¼ˆæ‚¨ï¼‰ï¼šæœ¬åœ°é–‹ç™¼
ai-team create-task "å¯¦ç¾ API Gateway" --assign backend-dev

# è‡ªå‹•åŒæ­¥åˆ°é›²ç«¯
ai-team sync push

# æˆå“¡ Bï¼ˆé ç«¯ï¼‰ï¼šé€éé›²ç«¯ API æŸ¥çœ‹
curl https://api.shyangtsuen.xyz/api/tasks/status/pending

# æˆå“¡ B å®Œæˆä»»å‹™ï¼ˆåœ¨é›²ç«¯ï¼‰
curl -X POST https://api.shyangtsuen.xyz/api/tasks/task-123/complete

# æ‚¨æ‹‰å–æ›´æ–°
ai-team sync pull
```

### æƒ…å¢ƒ 3: æ··åˆå·¥ä½œ

```bash
# åœ¨å…¬å¸ï¼šä½¿ç”¨æœ¬åœ°ç’°å¢ƒ
ai-team --mode local

# åœ¨å®¶ï¼šé€éé›²ç«¯ API
ai-team --mode cloud

# ä»»ä½•åœ°æ–¹ï¼šè‡ªå‹•é¸æ“‡
ai-team --mode auto  # è‡ªå‹•åµæ¸¬ç’°å¢ƒ
```

## ğŸ“ ç›®éŒ„çµæ§‹

```
ai-agent-team-v1/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ main/
â”‚   â”‚   â”œâ”€â”€ python/              # æœ¬åœ° Python ç‰ˆæœ¬
â”‚   â”‚   â”‚   â”œâ”€â”€ api/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ main.py      # FastAPI ä¸»ç¨‹å¼
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ routes/      # API è·¯ç”±
â”‚   â”‚   â”‚   â”œâ”€â”€ core/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ database.py  # SQLite æ“ä½œ
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ vectordb.py  # ChromaDB æ“ä½œ
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ sync.py      # åŒæ­¥å¼•æ“
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ storage.py   # æœ¬åœ°æª”æ¡ˆç®¡ç†
â”‚   â”‚   â”‚   â”œâ”€â”€ agents/          # Agent å¯¦ç¾
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ coordinator.py
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ backend_dev.py
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ ...
â”‚   â”‚   â”‚   â””â”€â”€ cli/
â”‚   â”‚   â”‚       â””â”€â”€ cli.py       # CLI å·¥å…·
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ js/                  # é›²ç«¯ TypeScript ç‰ˆæœ¬
â”‚   â”‚       â”œâ”€â”€ index.ts         # Cloudflare Workers
â”‚   â”‚       â”œâ”€â”€ agents/
â”‚   â”‚       â”œâ”€â”€ core/
â”‚   â”‚       â””â”€â”€ types/
â”‚   â”‚
â”‚   â””â”€â”€ web/                     # Web UI (Svelte)
â”‚       â”œâ”€â”€ src/
â”‚       â”œâ”€â”€ public/
â”‚       â””â”€â”€ package.json
â”‚
â”œâ”€â”€ data/                        # æœ¬åœ°è³‡æ–™å„²å­˜
â”‚   â”œâ”€â”€ database/
â”‚   â”‚   â””â”€â”€ ai-agent.db         # SQLite è³‡æ–™åº«
â”‚   â”œâ”€â”€ vectors/                # ChromaDB è³‡æ–™
â”‚   â”œâ”€â”€ documents/              # æ–‡æª”å„²å­˜
â”‚   â””â”€â”€ backups/                # æœ¬åœ°å‚™ä»½
â”‚
â”œâ”€â”€ docker/
â”‚   â”œâ”€â”€ docker-compose.yml      # æœ¬åœ°ç’°å¢ƒ
â”‚   â”œâ”€â”€ Dockerfile.api          # FastAPI
â”‚   â”œâ”€â”€ Dockerfile.ui           # Web UI
â”‚   â””â”€â”€ nginx.conf              # Nginx é…ç½®
â”‚
â”œâ”€â”€ scripts/
â”‚   â”œâ”€â”€ setup-local.sh          # æœ¬åœ°ç’°å¢ƒè¨­å®š
â”‚   â”œâ”€â”€ setup-cloudflare.sh     # é›²ç«¯è³‡æºè¨­å®š
â”‚   â”œâ”€â”€ sync.py                 # åŒæ­¥è…³æœ¬
â”‚   â””â”€â”€ deploy.sh               # éƒ¨ç½²è…³æœ¬
â”‚
â””â”€â”€ config/
    â”œâ”€â”€ local.yaml              # æœ¬åœ°é…ç½®
    â”œâ”€â”€ cloud.yaml              # é›²ç«¯é…ç½®
    â””â”€â”€ sync.yaml               # åŒæ­¥é…ç½®
```

## ğŸ³ Docker Compose é…ç½®

```yaml
# docker-compose.yml
version: '3.8'

services:
  # FastAPI å¾Œç«¯
  api:
    build:
      context: .
      dockerfile: docker/Dockerfile.api
    ports:
      - "8000:8000"
    volumes:
      - ./data:/app/data
      - ./src/main/python:/app/src
    environment:
      - MODE=local
      - DATABASE_PATH=/app/data/database/ai-agent.db
      - VECTOR_DB_PATH=/app/data/vectors
    depends_on:
      - chromadb
      - redis

  # ChromaDB å‘é‡è³‡æ–™åº«
  chromadb:
    image: chromadb/chroma:latest
    ports:
      - "8001:8000"
    volumes:
      - ./data/vectors:/chroma/chroma

  # Redis (å¯é¸çš„å¿«å–)
  redis:
    image: redis:alpine
    ports:
      - "6379:6379"
    volumes:
      - ./data/redis:/data

  # Web UI
  ui:
    build:
      context: .
      dockerfile: docker/Dockerfile.ui
    ports:
      - "3000:3000"
    environment:
      - API_URL=http://api:8000
      - MODE=local

  # Nginx (åå‘ä»£ç†)
  nginx:
    image: nginx:alpine
    ports:
      - "80:80"
    volumes:
      - ./docker/nginx.conf:/etc/nginx/nginx.conf
    depends_on:
      - api
      - ui
```

## ğŸ› ï¸ CLI å·¥å…·è¨­è¨ˆ

```bash
# AI Agent Team CLI

# ç’°å¢ƒç®¡ç†
ai-team init --mode hybrid              # åˆå§‹åŒ–æ··åˆç’°å¢ƒ
ai-team start                           # å•Ÿå‹•æœ¬åœ°ç’°å¢ƒ
ai-team stop                            # åœæ­¢æœ¬åœ°ç’°å¢ƒ
ai-team status                          # æŸ¥çœ‹ç‹€æ…‹

# æ¨¡å¼åˆ‡æ›
ai-team config --mode local             # åˆ‡æ›åˆ°æœ¬åœ°æ¨¡å¼
ai-team config --mode cloud             # åˆ‡æ›åˆ°é›²ç«¯æ¨¡å¼
ai-team config --mode auto              # è‡ªå‹•æ¨¡å¼

# å°ˆæ¡ˆç®¡ç†
ai-team create-project "å°ˆæ¡ˆåç¨±"        # å‰µå»ºå°ˆæ¡ˆ
ai-team list-projects                   # åˆ—å‡ºå°ˆæ¡ˆ

# ä»»å‹™ç®¡ç†
ai-team create-task "ä»»å‹™æè¿°" --type implement_feature
ai-team list-tasks --status pending
ai-team complete-task <task-id>

# Coordinator æ“ä½œ
ai-team coordinator process "å¯¦ç¾ç”¨æˆ¶ç™»å…¥åŠŸèƒ½"
ai-team coordinator assign <task-id> backend-dev
ai-team coordinator progress            # æŸ¥çœ‹é€²åº¦

# Agent æ“ä½œ
ai-team agent status backend-dev        # æŸ¥çœ‹ Agent ç‹€æ…‹
ai-team agent metrics backend-dev       # æŸ¥çœ‹æ€§èƒ½æŒ‡æ¨™
ai-team agent trigger backend-dev       # è§¸ç™¼ Agent è™•ç†ä»»å‹™

# çŸ¥è­˜åº«ç®¡ç†
ai-team kb upload ./docs/**/*.md        # ä¸Šå‚³æ–‡æª”
ai-team kb search "JWT èªè­‰"            # æœç´¢çŸ¥è­˜åº«
ai-team kb list --category development  # åˆ—å‡ºæ–‡æª”

# åŒæ­¥ç®¡ç†
ai-team sync status                     # æŸ¥çœ‹åŒæ­¥ç‹€æ…‹
ai-team sync push                       # æ¨é€åˆ°é›²ç«¯
ai-team sync pull                       # å¾é›²ç«¯æ‹‰å–
ai-team sync both                       # é›™å‘åŒæ­¥
ai-team sync auto --interval 5m         # è‡ªå‹•åŒæ­¥
ai-team sync conflicts                  # æŸ¥çœ‹è¡çª

# å‚™ä»½ç®¡ç†
ai-team backup create                   # å‰µå»ºæœ¬åœ°å‚™ä»½
ai-team backup restore <backup-id>      # æ¢å¾©å‚™ä»½
ai-team backup list                     # åˆ—å‡ºå‚™ä»½
ai-team backup cloud                    # å‚™ä»½åˆ°é›²ç«¯

# æ—¥èªŒæŸ¥çœ‹
ai-team logs --level error --tail 100   # æŸ¥çœ‹éŒ¯èª¤æ—¥èªŒ
ai-team logs --agent backend-dev        # æŸ¥çœ‹ç‰¹å®š Agent æ—¥èªŒ
ai-team logs --task task-123            # æŸ¥çœ‹ä»»å‹™æ—¥èªŒ

# ç›£æ§
ai-team monitor                         # å³æ™‚ç›£æ§
ai-team stats                           # çµ±è¨ˆè³‡è¨Š
```

## ğŸ“Š è³‡æ–™åŒæ­¥æµç¨‹

```python
# sync.py æ ¸å¿ƒé‚è¼¯

class SyncEngine:
    def __init__(self):
        self.local_db = SQLiteDB()
        self.cloud_api = CloudflareAPI()

    def sync_tasks(self, direction='both'):
        """åŒæ­¥ä»»å‹™è³‡æ–™"""
        if direction in ['push', 'both']:
            # æ¨é€åˆ°é›²ç«¯
            local_tasks = self.local_db.get_updated_tasks(
                since=last_sync_time
            )
            for task in local_tasks:
                self.cloud_api.upsert_task(task)

        if direction in ['pull', 'both']:
            # å¾é›²ç«¯æ‹‰å–
            cloud_tasks = self.cloud_api.get_updated_tasks(
                since=last_sync_time
            )
            for task in cloud_tasks:
                # æª¢æŸ¥è¡çª
                if self.has_conflict(task):
                    self.resolve_conflict(task)
                else:
                    self.local_db.upsert_task(task)

    def sync_knowledge_base(self):
        """åŒæ­¥çŸ¥è­˜åº«"""
        # 1. åŒæ­¥æ–‡æª”å…ƒæ•¸æ“š
        self.sync_documents()

        # 2. åŒæ­¥å‘é‡è³‡æ–™
        self.sync_vectors()

        # 3. åŒæ­¥æª”æ¡ˆ
        self.sync_files()

    def resolve_conflict(self, item):
        """è§£æ±ºè¡çª"""
        strategy = self.config.conflict_resolution

        if strategy == 'newest_wins':
            return self.newest_wins(item)
        elif strategy == 'manual':
            return self.manual_resolve(item)
        elif strategy == 'merge':
            return self.merge(item)
```

## ğŸ” å®‰å…¨æ€§è€ƒé‡

### æœ¬åœ°ç’°å¢ƒ
- âœ… è³‡æ–™åŠ å¯†å„²å­˜ï¼ˆAES-256ï¼‰
- âœ… æœ¬åœ°è³‡æ–™åº«å¯†ç¢¼ä¿è­·
- âœ… æª”æ¡ˆæ¬Šé™æ§åˆ¶

### é›²ç«¯åŒæ­¥
- âœ… HTTPS åŠ å¯†å‚³è¼¸
- âœ… API Token èªè­‰
- âœ… è³‡æ–™ç«¯åˆ°ç«¯åŠ å¯†é¸é …

### å‚™ä»½ç­–ç•¥
```yaml
backup:
  local:
    frequency: daily
    retention: 30_days
    path: ./data/backups/

  cloud:
    frequency: weekly
    retention: 90_days
    encryption: true
```

## ğŸ“ˆ æ•ˆèƒ½å„ªåŒ–

### æœ¬åœ°ç’°å¢ƒ
- SQLite ç´¢å¼•å„ªåŒ–
- ChromaDB å¿«å–
- Redis æŸ¥è©¢å¿«å–
- æ‰¹æ¬¡è™•ç†

### åŒæ­¥å„ªåŒ–
- å¢é‡åŒæ­¥ï¼ˆåƒ…åŒæ­¥è®Šæ›´ï¼‰
- å£“ç¸®å‚³è¼¸
- ä¸¦è¡Œä¸Šå‚³/ä¸‹è¼‰
- æ–·é»çºŒå‚³

## ğŸ¯ ä¸‹ä¸€æ­¥å¯¦ç¾

æˆ‘ç¾åœ¨å°‡ç‚ºæ‚¨å¯¦ç¾ï¼š

1. âœ… æœ¬åœ° Python FastAPI ç‰ˆæœ¬
2. âœ… SQLite + ChromaDB æ•´åˆ
3. âœ… CLI å·¥å…·
4. âœ… Docker Compose é…ç½®
5. âœ… åŒæ­¥æ©Ÿåˆ¶
6. âœ… Web UIï¼ˆç°¡å–®ç‰ˆï¼‰

é è¨ˆå¯¦ç¾æ™‚é–“ï¼š2-3 å°æ™‚
é–‹å§‹å¯¦ç¾å—ï¼Ÿ
